from datetime import datetime

data2 = {
    "artiste": "Artiste 4",
    "datehdebut": "2023-08-08 15:00",
    "duree": "02:00",
    "description": "Description de l'artiste 1",
    "imageurl": "url_image_1",
    "sceneid": 1,
    "style_musicalid": 1,
    "origineid": 1
}

data = [{'id': 347, 'date': '2023-04-24T12:16:34', 'date_gmt': '2023-04-24T10:16:34', 'guid': {'rendered': 'http://cchost.freeboxos.fr/LiveEvents/?p=347'}, 'modified': '2023-04-24T12:16:36', 'modified_gmt': '2023-04-24T10:16:36', 'slug': 'megan-thee-stallion', 'status': 'publish', 'type': 'post', 'link': 'https://cchost.bmcorp.fr/LiveEvents/megan-thee-stallion/', 'title': {'rendered': 'MEGAN THEE STALLION'}, 'content': {'rendered': '', 'protected': False}, 'excerpt': {'rendered': '', 'protected': False}, 'author': 4, 'featured_media': 0, 'comment_status': 'open', 'ping_status': 'open', 'sticky': False, 'template': '', 'format': 'standard', 'meta': {'footnotes': ''}, 'categories': [18], 'tags': [], 'acf': {'artiste': 'MEGAN THEE STALLION', 'style_musical': 'Rap', 'origine': 'USA', 'scene': 'Scène Beta', 'date': '20230611', 'hdebut': '18:15:00', 'hfin': '19:15:00', 'description': 'Megan Thee Stallion', 'image': 146, 'imageurl': 'http://cchost.freeboxos.fr/LiveEvents/wp-content/uploads/2023/04/megan-the-stallion.jpg'}, '_links': {'self': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/posts/347'}], 'collection': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/posts'}], 'about': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/types/post'}], 'author': [{'embeddable': True, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/users/4'}], 'replies': [{'embeddable': True, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/comments?post=347'}], 'version-history': [{'count': 2, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/posts/347/revisions'}], 'predecessor-version': [{'id': 349, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/posts/347/revisions/349'}], 'wp:attachment': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/media?parent=347'}], 'wp:term': [{'taxonomy': 'category', 'embeddable': True, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/categories?post=347'}, {'taxonomy': 'post_tag', 'embeddable': True, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/tags?post=347'}], 'curies': [{'name': 'wp', 'href': 'https://api.w.org/{rel}', 'templated': True}]}, '_embedded': {'author': [{'id': 4, 'name': 'invite', 'url': '', 'description': '', 'link': 'https://cchost.bmcorp.fr/LiveEvents/author/invite/', 'slug': 'invite', 'avatar_urls': {'24': 'https://secure.gravatar.com/avatar/a42fa0e3c4ee9868a9a5305575d439f4?s=24&d=mm&r=g', '48': 'https://secure.gravatar.com/avatar/a42fa0e3c4ee9868a9a5305575d439f4?s=48&d=mm&r=g', '96': 'https://secure.gravatar.com/avatar/a42fa0e3c4ee9868a9a5305575d439f4?s=96&d=mm&r=g'}, 'is_super_admin': False, 'woocommerce_meta': {'variable_product_tour_shown': '', 'activity_panel_inbox_last_read': '', 'activity_panel_reviews_last_read': '', 'categories_report_columns': '', 'coupons_report_columns': '', 'customers_report_columns': '', 'orders_report_columns': '', 'products_report_columns': '', 'revenue_report_columns': '', 'taxes_report_columns': '', 'variations_report_columns': '', 'dashboard_sections': '', 'dashboard_chart_type': '', 'dashboard_chart_interval': '', 'dashboard_leaderboard_rows': '', 'homepage_layout': '', 'homepage_stats': '', 'task_list_tracked_started_tasks': '', 'help_panel_highlight_shown': '', 'android_app_banner_dismissed': ''}, 'acf': [], '_links': {'self': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/users/4'}], 'collection': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/users'}]}}], 'wp:term': [[{'id': 18, 'link': 'https://cchost.bmcorp.fr/LiveEvents/category/artiste/', 'name': 'Artistes', 'slug': 'artiste', 'taxonomy': 'category', 'acf': [], '_links': {'self': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/categories/18'}], 'collection': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/categories'}], 'about': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/taxonomies/category'}], 'wp:post_type': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/posts?categories=18'}], 'curies': [{'name': 'wp', 'href': 'https://api.w.org/{rel}', 'templated': True}]}}], []]}}, {'id': 344, 'date': '2023-04-24T12:14:42', 'date_gmt': '2023-04-24T10:14:42', 'guid': {'rendered': 'http://cchost.freeboxos.fr/LiveEvents/?p=344'}, 'modified': '2023-04-24T12:14:44', 'modified_gmt': '2023-04-24T10:14:44', 'slug': 'modest-mouse', 'status': 'publish', 'type': 'post', 'link': 'https://cchost.bmcorp.fr/LiveEvents/modest-mouse/', 'title': {'rendered': 'MODEST MOUSE'}, 'content': {'rendered': '', 'protected': False}, 'excerpt': {'rendered': '', 'protected': False}, 'author': 4, 'featured_media': 0, 'comment_status': 'open', 'ping_status': 'open', 'sticky': False, 'template': '', 'format': 'standard', 'meta': {'footnotes': ''}, 'categories': [18], 'tags': [], 'acf': {'artiste': 'MODEST MOUSE', 'style_musical': 'Rock', 'origine': 'USA', 'scene': 'Scène Alpha', 'date': '20230610', 'hdebut': '16:15:00', 'hfin': '17:00:00', 'description': 'Ah, Modest Mouse', 'image': 147, 'imageurl': 'http://cchost.freeboxos.fr/LiveEvents/wp-content/uploads/2023/04/modest-mouse.webp'}, '_links': {'self': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/posts/344'}], 'collection': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/posts'}], 'about': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/types/post'}], 'author': [{'embeddable': True, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/users/4'}], 'replies': [{'embeddable': True, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/comments?post=344'}], 'version-history': [{'count': 2, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/posts/344/revisions'}], 'predecessor-version': [{'id': 346, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/posts/344/revisions/346'}], 'wp:attachment': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/media?parent=344'}], 'wp:term': [{'taxonomy': 'category', 'embeddable': True, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/categories?post=344'}, {'taxonomy': 'post_tag', 'embeddable': True, 'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/tags?post=344'}], 'curies': [{'name': 'wp', 'href': 'https://api.w.org/{rel}', 'templated': True}]}, '_embedded': {'author': [{'id': 4, 'name': 'invite', 'url': '', 'description': '', 'link': 'https://cchost.bmcorp.fr/LiveEvents/author/invite/', 'slug': 'invite', 'avatar_urls': {'24': 'https://secure.gravatar.com/avatar/a42fa0e3c4ee9868a9a5305575d439f4?s=24&d=mm&r=g', '48': 'https://secure.gravatar.com/avatar/a42fa0e3c4ee9868a9a5305575d439f4?s=48&d=mm&r=g', '96': 'https://secure.gravatar.com/avatar/a42fa0e3c4ee9868a9a5305575d439f4?s=96&d=mm&r=g'}, 'is_super_admin': False, 'woocommerce_meta': {'variable_product_tour_shown': '', 'activity_panel_inbox_last_read': '', 'activity_panel_reviews_last_read': '', 'categories_report_columns': '', 'coupons_report_columns': '', 'customers_report_columns': '', 'orders_report_columns': '', 'products_report_columns': '', 'revenue_report_columns': '', 'taxes_report_columns': '', 'variations_report_columns': '', 'dashboard_sections': '', 'dashboard_chart_type': '', 'dashboard_chart_interval': '', 'dashboard_leaderboard_rows': '', 'homepage_layout': '', 'homepage_stats': '', 'task_list_tracked_started_tasks': '', 'help_panel_highlight_shown': '', 'android_app_banner_dismissed': ''}, 'acf': [], '_links': {'self': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/users/4'}], 'collection': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/users'}]}}], 'wp:term': [[{'id': 18, 'link': 'https://cchost.bmcorp.fr/LiveEvents/category/artiste/', 'name': 'Artistes', 'slug': 'artiste', 'taxonomy': 'category', 'acf': [], '_links': {'self': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/categories/18'}], 'collection': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/categories'}], 'about': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/taxonomies/category'}], 'wp:post_type': [{'href': 'https://cchost.bmcorp.fr/LiveEvents/wp-json/wp/v2/posts?categories=18'}], 'curies': [{'name': 'wp', 'href': 'https://api.w.org/{rel}', 'templated': True}]}}], []]}}]


organizeddata = []
for d in data:
    da = d["acf"]
    #Permet de récupérer le format wordpress et le modifier pour le format de la BDD (date+hdebut => datehdebut)
    datehdebut = datetime.strptime(da["date"] + da["hdebut"], "%Y%m%d%H:%M:%S")
    #Permet de calculer le temps de passage sur scène
    duree = datetime.strptime(da["hfin"], "%H:%M:%S") - datetime.strptime(da["hdebut"], "%H:%M:%S")
    duree_passage = f"{duree.seconds // 3600:02}:{(duree.seconds // 60) % 60:02}"
    #Organisation des données
    clean = {
        "artiste" : da["artiste"],
        "datehdebut" : datehdebut.strftime("%Y-%m-%d %H:%M"),
        "duree" : duree_passage,
        "description" : da["description"],
        "imageurl" : da["imageurl"],
        "scene" : da["scene"],
        "style_musical" : da["style_musical"],
        "origine" : da["origine"],
    }
    organizeddata.append(clean) 

print("Type of 'data':", type(data))
print("Type of 'data2':", type(data2))


if "acf" in data[0]:
    print("il y a acf dans data")
else:
    print("il y a pas wesh dans data")

if "acf" in data2:
    print("il y a acf dans data 2")
else:
    print("il y a pas wesh dans data 2")